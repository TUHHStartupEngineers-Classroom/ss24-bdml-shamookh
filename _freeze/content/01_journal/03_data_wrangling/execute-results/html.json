{
  "hash": "f9864307ecb8d23497cf407ad16b241b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"03 Automated Machine Learning with H20 (I)\"\nauthor: \"Muhammad Shamookh\"\ndate: \"2024-06\"\noutput:\n  html_document:\n    toc: true\n    toc_float: true\n    df_print: paged\n    collapsed: false\n    number_sections: true\n    toc_depth: 3\n    code_folding: hide\neditor_options:\n  chunk_output_type: console\n---\n\n\n\n\n# Descriptive features and plot_ggpairs() to further investigate the features.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(GGally)\n```\n:::\n\n\n##The provided R code snippet is performing the following tasks:\n\n- Loading a CSV File:\nIt reads a CSV file named WA_Fn-UseC_-HR-Employee-Attrition.csv located in the datasets-1067-1925 directory within the ss24-bdml-shamookh GitHub repository on your local machine. The read_csv function from the readr package (part of the tidyverse) is used for this task.\n\n- Inspecting the Data:\nAfter loading the data into a data frame called employee_attrition_tbl, it uses the glimpse function to display the structure and a preview of the data. The glimpse function provides a concise view of the data, showing the column names, data types, and a preview of the first few values in each column.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemployee_attrition_tbl <- read_csv(\"./03_ml_aut_files/datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Rows: 1470 Columns: 35\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...\n#> dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nemployee_attrition_tbl %>%\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Rows: 1,470\n#> Columns: 35\n#> $ Age                      <dbl> 41, 49, 37, 33, 27, 32, 59, 30, 38, 36, 35, 2…\n#> $ Attrition                <chr> \"Yes\", \"No\", \"Yes\", \"No\", \"No\", \"No\", \"No\", \"…\n#> $ BusinessTravel           <chr> \"Travel_Rarely\", \"Travel_Frequently\", \"Travel…\n#> $ DailyRate                <dbl> 1102, 279, 1373, 1392, 591, 1005, 1324, 1358,…\n#> $ Department               <chr> \"Sales\", \"Research & Development\", \"Research …\n#> $ DistanceFromHome         <dbl> 1, 8, 2, 3, 2, 2, 3, 24, 23, 27, 16, 15, 26, …\n#> $ Education                <dbl> 2, 1, 2, 4, 1, 2, 3, 1, 3, 3, 3, 2, 1, 2, 3, …\n#> $ EducationField           <chr> \"Life Sciences\", \"Life Sciences\", \"Other\", \"L…\n#> $ EmployeeCount            <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n#> $ EmployeeNumber           <dbl> 1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 14, 15, 16,…\n#> $ EnvironmentSatisfaction  <dbl> 2, 3, 4, 4, 1, 4, 3, 4, 4, 3, 1, 4, 1, 2, 3, …\n#> $ Gender                   <chr> \"Female\", \"Male\", \"Male\", \"Female\", \"Male\", \"…\n#> $ HourlyRate               <dbl> 94, 61, 92, 56, 40, 79, 81, 67, 44, 94, 84, 4…\n#> $ JobInvolvement           <dbl> 3, 2, 2, 3, 3, 3, 4, 3, 2, 3, 4, 2, 3, 3, 2, …\n#> $ JobLevel                 <dbl> 2, 2, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 1, 1, …\n#> $ JobRole                  <chr> \"Sales Executive\", \"Research Scientist\", \"Lab…\n#> $ JobSatisfaction          <dbl> 4, 2, 3, 3, 2, 4, 1, 3, 3, 3, 2, 3, 3, 4, 3, …\n#> $ MaritalStatus            <chr> \"Single\", \"Married\", \"Single\", \"Married\", \"Ma…\n#> $ MonthlyIncome            <dbl> 5993, 5130, 2090, 2909, 3468, 3068, 2670, 269…\n#> $ MonthlyRate              <dbl> 19479, 24907, 2396, 23159, 16632, 11864, 9964…\n#> $ NumCompaniesWorked       <dbl> 8, 1, 6, 1, 9, 0, 4, 1, 0, 6, 0, 0, 1, 0, 5, …\n#> $ Over18                   <chr> \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", …\n#> $ OverTime                 <chr> \"Yes\", \"No\", \"Yes\", \"Yes\", \"No\", \"No\", \"Yes\",…\n#> $ PercentSalaryHike        <dbl> 11, 23, 15, 11, 12, 13, 20, 22, 21, 13, 13, 1…\n#> $ PerformanceRating        <dbl> 3, 4, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 3, …\n#> $ RelationshipSatisfaction <dbl> 1, 4, 2, 3, 4, 3, 1, 2, 2, 2, 3, 4, 4, 3, 2, …\n#> $ StandardHours            <dbl> 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 8…\n#> $ StockOptionLevel         <dbl> 0, 1, 0, 0, 1, 0, 3, 1, 0, 2, 1, 0, 1, 1, 0, …\n#> $ TotalWorkingYears        <dbl> 8, 10, 7, 8, 6, 8, 12, 1, 10, 17, 6, 10, 5, 3…\n#> $ TrainingTimesLastYear    <dbl> 0, 3, 3, 3, 3, 2, 3, 2, 2, 3, 5, 3, 1, 2, 4, …\n#> $ WorkLifeBalance          <dbl> 1, 3, 3, 3, 3, 2, 2, 3, 3, 2, 3, 3, 2, 3, 3, …\n#> $ YearsAtCompany           <dbl> 6, 10, 0, 8, 2, 7, 1, 1, 9, 7, 5, 9, 5, 2, 4,…\n#> $ YearsInCurrentRole       <dbl> 4, 7, 0, 7, 2, 7, 0, 0, 7, 7, 4, 5, 2, 2, 2, …\n#> $ YearsSinceLastPromotion  <dbl> 0, 1, 0, 3, 2, 3, 0, 0, 1, 7, 0, 0, 4, 1, 0, …\n#> $ YearsWithCurrManager     <dbl> 5, 7, 0, 0, 2, 6, 0, 0, 8, 7, 3, 8, 3, 2, 3, …\n```\n\n\n:::\n:::\n\nThis output shows the number of rows and columns in the data frame, the names of the columns, the data types of each column (e.g., <dbl> for double/numeric, <chr> for character/string), and a preview of the first few values in each column. This provides a quick overview of the datasets structure and content.\n\n- Function Code:\nThe function creates a pairwise plot matrix with color coding based on the Species variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the plot_ggpairs function\nplot_ggpairs <- function(data, color = NULL, density_alpha = 0.5) {\n   \n    color_expr <- enquo(color)\n   \n    if (rlang::quo_is_null(color_expr)) {\n       \n        g <- data %>%\n            ggpairs(lower = \"blank\",\n                    title = \"\",      # Set title to empty string\n                    subtitle = \"\")   # Set subtitle to empty string\n       \n    } else {\n       \n        color_name <- quo_name(color_expr)\n       \n        g <- data %>%\n            ggpairs(mapping = aes_string(color = color_name),\n                    lower = \"blank\", legend = 1,\n                    diag = list(continuous = wrap(\"densityDiag\",\n                                                  alpha = density_alpha)),\n                    title = \"\",      # Set title to empty string\n                    subtitle = \"\")   # Set subtitle to empty string +\n            theme(legend.position = \"bottom\") +\n            theme(text = element_text(family = \"Times New Roman\", size = 18)) +\n            labs(title = element_text(face = \"bold\", size = 12),\n                 subtitle = element_text(face = \"bold\", size = 12),\n                 caption = element_text(size = 12))\n    }\n   \n    return(g)\n}\n```\n:::\n\n\n- Plotting Code:\nThe plotting code reads the data, selects relevant columns, and uses the modified plot_ggpairs function to create a plot. It saves the plot as \"Attrition_plot.png\" and displays it in the R console or viewer.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read the data\nemployee_attrition_tbl <- read_csv(\"./03_ml_aut_files/datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Rows: 1470 Columns: 35\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...\n#> dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Create the plot using plot_ggpairs function\nplot <- employee_attrition_tbl %>%\n    select(Attrition, MonthlyIncome, PercentSalaryHike, StockOptionLevel,\n           EnvironmentSatisfaction, WorkLifeBalance, JobInvolvement, OverTime,\n           TrainingTimesLastYear, YearsAtCompany, YearsSinceLastPromotion) %>%\n    plot_ggpairs(color = Attrition)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning in warn_if_args_exist(list(...)): Extra arguments: \"subtitle\" are being\n#> ignored.  If these are meant to be aesthetics, submit them using the 'mapping'\n#> variable within ggpairs with ggplot2::aes or ggplot2::aes_string.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning: `aes_string()` was deprecated in ggplot2 3.0.0.\n#> ℹ Please use tidy evaluation idioms with `aes()`.\n#> ℹ See also `vignette(\"ggplot2-in-packages\")` for more information.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Save the plot as \"Attrition_plot\"\nggsave(\"Attrition_plot.png\", plot, width = 25, height = 15)\n\n# Displaying of the saved plot\nknitr::include_graphics(\"./Attrition_plot.png\")\n```\n\n::: {.cell-output-display}\n![](./Attrition_plot.png){width=3750}\n:::\n:::\n\n# Answer to the questions\n\n### Compensation Features\n1. What can you deduce about the interaction between Monthly Income and Attrition?\nc. Those that are leaving have a lower Monthly Income\n\n2. What can you deduce about the interaction between Percent Salary Hike and Attrition?\n  d. It's difficult to deduce anything based on the visualization\n\n3. What can you deduce about the interaction between Stock Option Level and Attrition?\n  b. Those that are staying have a higher stock option level\n\n### Survey Results\n4. What can you deduce about the interaction between Environment Satisfaction and Attrition?\n  a. A higher proportion of those leaving have a low environment satisfaction level\n \n5. What can you deduce about the interaction between Work Life Balance and Attrition\n  b. Those that are staying have a higher density of 2's and 3'\n \n### Performance Data\n6. What Can you deduce about the interaction between Job Involvement and Attrition?\n  a. Those that are leaving have a lower density of 3's and 4's\n \n### Work-Life Features\n7. What can you deduce about the interaction between Over Time and Attrition?\n  a. The proportion of those leaving that are working Over Time are high compared to those that are not leaving\n \n### Training and Education\n8. What can you deduce about the interaction between Training Times Last Year and Attrition\n  c It's difficult to deduce anything based on the visualization\n \n### Time-Based Features\n9. What can you deduce about the interaction between Years At Company and Attrition\n  b People that leave tend to have less working years at the company\n \n10. What can you deduce about the interaction between Years Since Last Promotion and Attrition?\n  c. It's difficult to deduce anything based on the visualization",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}